From 71d3fa8df5481fa72706a0977b786abb9cc965c6 Mon Sep 17 00:00:00 2001
Message-Id: <cover-00.31-00000000000-20210528T110027Z-avarab@gmail.com>
In-Reply-To: <87lf80l1m6.fsf@evledraar.gmail.com>
References: <87lf80l1m6.fsf@evledraar.gmail.com>
From: Ævar Arnfjörð Bjarmason <avarab@gmail.com>
Date: Fri, 28 May 2021 13:00:27 +0200
Subject: [PATCH 00/31] *** SUBJECT HERE ***
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

*** BLURB HERE ***

Emily Shaffer (25):
  hook: add 'run' subcommand
  hook.c: add a hook_exists() wrapper and use it in bugreport.c
  gc: use hook library for pre-auto-gc hook
  rebase: teach pre-rebase to use hook.h
  am: convert applypatch hooks to use config
  hooks: convert 'post-checkout' hook to hook library
  merge: use config-based hooks for post-merge hook
  send-email: use 'git hook run' for 'sendemail-validate'
  git-p4: use 'git hook' to run hooks
  commit: use hook.h to execute hooks
  read-cache: convert post-index-change hook to use config
  receive-pack: convert push-to-checkout hook to hook.h
  run-command: allow stdin for run_processes_parallel
  hook: support passing stdin to hooks
  am: convert 'post-rewrite' hook to hook.h
  run-command: add stdin callback for parallelization
  hook: provide stdin by string_list or callback
  hook: convert 'post-rewrite' hook in sequencer.c to hook.h
  transport: convert pre-push hook to use config
  reference-transaction: use hook.h to run hooks
  run-command: allow capturing of collated output
  hooks: allow callers to capture output
  receive-pack: convert 'update' hook to hook.h
  post-update: use hook.h library
  receive-pack: convert receive hooks to hook.h

Ævar Arnfjörð Bjarmason (6):
  hooks tests: don't leave "actual" nonexisting on failure
  gc tests: add a test for the "pre-auto-gc" hook
  run-command.h: move find_hook() to hook.h
  git hook run: add an --ignore-missing flag
  hooks: fix a TOCTOU in "did we run a hook?" heuristic
  hook-list.h: add a generated list of hooks, like config-list.h

 .gitignore                   |   2 +
 Documentation/git-hook.txt   |  49 ++++++
 Documentation/githooks.txt   |   6 +
 Makefile                     |  16 +-
 builtin.h                    |   1 +
 builtin/am.c                 |  34 ++--
 builtin/bugreport.c          |  46 ++----
 builtin/checkout.c           |  17 +-
 builtin/clone.c              |   7 +-
 builtin/commit.c             |  19 ++-
 builtin/fetch.c              |   1 +
 builtin/gc.c                 |   8 +-
 builtin/hook.c               |  72 +++++++++
 builtin/merge.c              |  22 ++-
 builtin/rebase.c             |   9 +-
 builtin/receive-pack.c       | 299 ++++++++++++++++++-----------------
 builtin/submodule--helper.c  |   2 +-
 builtin/worktree.c           |  31 ++--
 command-list.txt             |   1 +
 commit.c                     |  17 +-
 commit.h                     |   3 +-
 generate-hooklist.sh         |  20 +++
 git-p4.py                    |  72 +--------
 git-send-email.perl          |  20 ++-
 git.c                        |   1 +
 hook.c                       | 224 ++++++++++++++++++++++++++
 hook.h                       | 122 ++++++++++++++
 read-cache.c                 |  12 +-
 refs.c                       |  43 ++---
 reset.c                      |  15 +-
 run-command.c                | 157 +++++++++---------
 run-command.h                |  55 ++++---
 sequencer.c                  |  88 +++++------
 submodule.c                  |   1 +
 t/helper/test-run-command.c  |  46 +++++-
 t/t0061-run-command.sh       |  37 +++++
 t/t1350-config-hooks-path.sh |   1 +
 t/t1800-hook.sh              | 166 +++++++++++++++++++
 t/t6500-gc.sh                |  46 ++++++
 t/t9001-send-email.sh        |   4 +-
 transport.c                  |  58 ++-----
 41 files changed, 1295 insertions(+), 555 deletions(-)
 create mode 100644 Documentation/git-hook.txt
 create mode 100644 builtin/hook.c
 create mode 100755 generate-hooklist.sh
 create mode 100644 hook.c
 create mode 100644 hook.h
 create mode 100755 t/t1800-hook.sh

-- 
2.32.0.rc1.458.gd885d4f985c

