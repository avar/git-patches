From c279e6d6ba6521414a2f874ede13cb0e1d75396d Mon Sep 17 00:00:00 2001
Message-Id: <cover-v4-0.5-00000000000-20220705T105435Z-avarab@gmail.com>
In-Reply-To: <cover-v3-0.4-00000000000-20220701T102506Z-avarab@gmail.com>
References: <cover-v3-0.4-00000000000-20220701T102506Z-avarab@gmail.com>
From: Ævar Arnfjörð Bjarmason <avarab@gmail.com>
Date: Tue, 5 Jul 2022 12:54:35 +0200
Subject: [PATCH v4 0/5] *** SUBJECT HERE ***
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

*** BLURB HERE ***

Ævar Arnfjörð Bjarmason (5):
  .gitignore: ignore generated "/*.res", not "*.res"
  cocci: add a "coccicheck-test" target and test *.cocci rules
  cocci: have "coccicheck{,-pending}" depend on "coccicheck-test"
  cocci: add and apply a rule to find "unused" strbufs
  cocci: generalize "unused" rule to cover more than "strbuf"

 .gitignore                          |  2 +-
 Makefile                            | 22 +++++++-
 builtin/fetch.c                     |  3 +-
 builtin/merge.c                     |  4 --
 builtin/repack.c                    |  2 -
 contrib/coccinelle/tests/free.c     | 11 ++++
 contrib/coccinelle/tests/free.res   |  9 ++++
 contrib/coccinelle/tests/unused.c   | 82 +++++++++++++++++++++++++++++
 contrib/coccinelle/tests/unused.res | 45 ++++++++++++++++
 contrib/coccinelle/unused.cocci     | 43 +++++++++++++++
 contrib/scalar/scalar.c             |  3 +-
 diff.c                              |  2 -
 shared.mak                          |  4 +-
 13 files changed, 217 insertions(+), 15 deletions(-)
 create mode 100644 contrib/coccinelle/tests/free.c
 create mode 100644 contrib/coccinelle/tests/free.res
 create mode 100644 contrib/coccinelle/tests/unused.c
 create mode 100644 contrib/coccinelle/tests/unused.res
 create mode 100644 contrib/coccinelle/unused.cocci

Range-diff against v3:
1:  49e9ccb5819 < -:  ----------- cocci: add and apply a rule to find "unused" strbufs
2:  6324d3956ed < -:  ----------- cocci: catch unused "strbuf" using an xmalloc() pattern
3:  9a5e7208dec < -:  ----------- cocci: remove "when strict" from unused.cocci
4:  45a429b9cc9 < -:  ----------- cocci: generalize "unused" rule to cover more than "strbuf"
-:  ----------- > 1:  e9f749e16e9 .gitignore: ignore generated "/*.res", not "*.res"
-:  ----------- > 2:  5e15cb3781c cocci: add a "coccicheck-test" target and test *.cocci rules
-:  ----------- > 3:  85634bc61ff cocci: have "coccicheck{,-pending}" depend on "coccicheck-test"
-:  ----------- > 4:  028c9fe42ca cocci: add and apply a rule to find "unused" strbufs
-:  ----------- > 5:  c279e6d6ba6 cocci: generalize "unused" rule to cover more than "strbuf"
-- 
2.37.0.903.g3f2fd1cdc74

