From 7e6298ad481e43ff2d4b7f2856966708ba3cb839 Mon Sep 17 00:00:00 2001
Message-Id: <patch-v2-3.6-7e6298ad481-20210910T111845Z-avarab@gmail.com>
In-Reply-To: <cover-v2-0.6-00000000000-20210910T111845Z-avarab@gmail.com>
References: <cover-0.6-00000000000-20210908T151949Z-avarab@gmail.com>
	<cover-v2-0.6-00000000000-20210910T111845Z-avarab@gmail.com>
From: =?UTF-8?q?=C3=86var=20Arnfj=C3=B6r=C3=B0=20Bjarmason?=
 <avarab@gmail.com>
Date: Thu, 9 Sep 2021 22:12:29 +0200
Subject: [PATCH v2 3/6] on top

---
 builtin/help.c  | 7 +------
 t/t0012-help.sh | 1 -
 2 files changed, 1 insertion(+), 7 deletions(-)

diff --git a/builtin/help.c b/builtin/help.c
index c1f2614d280..51b18c291d8 100644
--- a/builtin/help.c
+++ b/builtin/help.c
@@ -548,17 +548,12 @@ int cmd_help(int argc, const char **argv, const char *prefix)
 	int nongit;
 	enum help_format parsed_help_format;
 	const char *page;
-	int standalone = 0;
 
 	argc = parse_options(argc, argv, prefix, builtin_help_options,
 			builtin_help_usage, 0);
 	parsed_help_format = help_format;
 
 	/* Options that take no further arguments */
-	standalone = show_config || show_guides;
-	if (argc && show_config)
-		usage_msg_opt(_("--config cannot be combined with other options"),
-			      builtin_help_usage, builtin_help_options);
 	if (argc && show_guides)
 		usage_msg_opt(_("--guides cannot be combined with other options"),
 			      builtin_help_usage, builtin_help_options);
@@ -591,7 +586,7 @@ int cmd_help(int argc, const char **argv, const char *prefix)
 	if (show_guides)
 		list_guides_help();
 
-	if (show_all || standalone) {
+	if (show_all || show_guides) {
 		printf("%s\n", _(git_more_info_string));
 		return 0;
 	}
diff --git a/t/t0012-help.sh b/t/t0012-help.sh
index 6e01da614f0..c3aa016fd30 100755
--- a/t/t0012-help.sh
+++ b/t/t0012-help.sh
@@ -35,7 +35,6 @@ test_expect_success 'basic help commands' '
 '
 
 test_expect_success 'invalid usage' '
-	test_expect_code 129 git help -c git-add &&
 	test_expect_code 129 git help -g git-add
 '
 
-- 
2.33.0.873.g125ff7b9940

