From 48e5c234ae4c8dbdfdc5267fb712f9fe1e0ae124 Mon Sep 17 00:00:00 2001
In-Reply-To: <20190315155959.12390-1-avarab@gmail.com>
References: <20190315155959.12390-1-avarab@gmail.com>
From: =?UTF-8?q?=C3=86var=20Arnfj=C3=B6r=C3=B0=20Bjarmason?=
 <avarab@gmail.com>
Date: Thu, 28 Mar 2019 17:06:16 +0100
Subject: [PATCH v4 0/7] *** SUBJECT HERE ***
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

*** BLURB HERE ***

Ævar Arnfjörð Bjarmason (7):
  gc: remove redundant check for gc_auto_threshold
  gc: convert to using the_hash_algo
  gc: refactor a "call me once" pattern
  reflog tests: make use of "test_config" idiom
  reflog tests: test for the "points nowhere" warning
  reflog tests: assert lack of early exit with expiry="never"
  gc: handle & check gc.reflogExpire config

 builtin/gc.c      | 37 +++++++++++++++++++++++++++++--------
 t/t1410-reflog.sh | 25 +++++++++++++++++--------
 t/t6500-gc.sh     | 19 +++++++++++++++++++
 3 files changed, 65 insertions(+), 16 deletions(-)

Range-diff:
 -:  ---------- >  1:  13019979b8 setup: free old value before setting `work_tree`
 -:  ---------- >  2:  4f14a8c180 Makefile: remove an out-of-date comment
 -:  ---------- >  3:  9559f8ffb5 Makefile: move "strip" assignment down from flags
 -:  ---------- >  4:  65260a4f23 Makefile: add/remove comments at top and tweak whitespace
 -:  ---------- >  5:  8fb2a231bf Makefile: Move *_LIBS assignment into its own section
 -:  ---------- >  6:  71a7894ba6 Makefile: move the setting of *FLAGS closer to "include"
 -:  ---------- >  7:  6d5d4b4e93 Makefile: allow for combining DEVELOPER=1 and CFLAGS="..."
 -:  ---------- >  8:  2008f29093 bisect: use string arguments to feed internal diff-tree
 -:  ---------- >  9:  40ae3d3eea bisect: fix internal diff-tree config loading
 -:  ---------- > 10:  b02be8b901 bisect: make diff-tree output prettier
 -:  ---------- > 11:  e8805af1c3 setup: fix memory leaks with `struct repository_format`
 -:  ---------- > 12:  de69e6f6c9 tests: let --stress-limit=<N> imply --stress
 -:  ---------- > 13:  f545737144 tests: introduce --stress-jobs=<N>
 -:  ---------- > 14:  e6aac8177d built-in rebase: no need to check out `onto` twice
 -:  ---------- > 15:  eaf81605b8 built-in rebase: use the correct reflog when switching branches
 -:  ---------- > 16:  c2d9629360 built-in rebase: demonstrate that ORIG_HEAD is not set correctly
 -:  ---------- > 17:  cbd29ead92 built-in rebase: set ORIG_HEAD just once, before the rebase
 -:  ---------- > 18:  37c80012f1 fetch: avoid calling write_or_die()
 -:  ---------- > 19:  143588949c fetch: ignore SIGPIPE during network operation
 -:  ---------- > 20:  f06ab027ef rev-list: allow cached objects in existence check
 -:  ---------- > 21:  df805ed6cf doc/fsck: clarify --connectivity-only behavior
 -:  ---------- > 22:  8d8c2a5aef fsck: always compute USED flags for unreachable objects
 -:  ---------- > 23:  cd8e7593b9 config: document --type=color output is a complete line
 -:  ---------- > 24:  cbdeab98e8 commit-tree: utilize parse-options api
 -:  ---------- > 25:  dec59817c1 gitk: Update Bulgarian translation (317t)
 -:  ---------- > 26:  041f5ea1cf The third batch
 1:  81694c8213 = 27:  be889156db gc: remove redundant check for gc_auto_threshold
 2:  4bdcf1d0be = 28:  764c9a7380 gc: convert to using the_hash_algo
 3:  9444a1233a = 29:  d521c22103 gc: refactor a "call me once" pattern
 4:  60a06ae618 = 30:  768aba9889 reflog tests: make use of "test_config" idiom
 5:  52838fdc44 = 31:  2ddbee93a1 reflog tests: test for the "points nowhere" warning
 6:  6063429f10 ! 32:  97e3d74371 reflog tests: assert lack of early exit with expiry="never"
    @@ -3,8 +3,7 @@
         reflog tests: assert lack of early exit with expiry="never"
     
         When gc.reflogExpire and gc.reflogExpireUnreachable are set to "never"
    -    and --stale-fix isn't in effect (covered by the first part of the "if"
    -    statement being modified here) we *could* exit early without
    +    and --stale-fix isn't in effect we *could* exit early without
         pointlessly looping over all the reflogs.
     
         However, as an earlier change to add a test for the "points nowhere"
 7:  6693d1d84d = 33:  48e5c234ae gc: handle & check gc.reflogExpire config
 8:  e0814569ab <  -:  ---------- reflog expire: don't assert the OID when locking refs
-- 
2.21.0.392.gf8f6787159e

